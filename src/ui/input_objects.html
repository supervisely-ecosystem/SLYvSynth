<sly-card
        title="Select objects"

        subtitle="Select a set of base primitives"
        :options="{collapsable: true}"
        :collapsed.sync="state.collapsed2"
        :disabled="{disabled: state.disabled2, message: 'complete stage 1 to unlock'}"
        ref="step2"
>

    <sly-field title="" description="Input project" class="mt15 mb15">
        <a slot="title" target="_blank"
           :href="`/projects/${data.projectId}/datasets`">{{ data.projectName }} ({{ data.projectImagesCount }}
            images)</a>
        <sly-icon slot="icon" :options="{ imageUrl: `${data.projectPreviewUrl}` }"/>
    </sly-field>


    <div class="fflex mt25 mb15" style="align-items: stretch" >


        <table class="beautiful-table" style="width: 100%">
            <thead>
            <tr>
                <th v-for="col in data.myColumns">
                    <div v-html="col['title']"></div>
                    <div style="color: #7f858e; font-weight: normal; font-size: 12px;">
                        {{ col["subtitle"] }}
                    </div>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="(row, row_index) in data.myRows">
                <td v-for="(col, col_index) in data.myColumns">
                    <div v-if="col.title === 'Selected'">
                        <el-checkbox v-model="state.classChecked[row['Name']]"></el-checkbox>
                    </div>
                    <div v-if="col.title === 'Name'">
                        {{ row[col.title] }}
                    </div>
                    <div v-if="col.title === 'Shape'">
                        <i class="zmdi zmdi-shape mr5"></i> {{ row[col.title] }}
                    </div>
                    <div v-if="col.title === 'Color'">
                        <i class="zmdi zmdi-circle mr5" :style="{color: row[col.title]}"></i> {{ row[col.title] }}
                    </div>
                    <div v-if="col.title === 'Count'">
                        <el-input-number v-model="state.classCounts[row.Name]" :min="0"
                                         size="small"
                                         :disabled="state.done2"></el-input-number>
                    </div>

                    <div v-if="col.title === 'Positive'">
                        <el-switch
                                v-model="state.classIsPositive[row.Name]"
                                on-text=""
                                off-text=""
                                disabled>
                        </el-switch>
                    </div>


                </td>
            </tr>
            </tbody>
        </table>


    </div>
    <div>
        <el-button
                type="primary"
                class="regular"
                :disabled="false"
                :loading="state.step2Loading"
                @click="state.step2Loading=true; command('download_objects')"
                v-if="!state.done2">
            Download


        </el-button>
        <div v-if="state.done2">
            <i class="zmdi zmdi-check-circle mr5 mt10 mb10" style="color: #13ce66"></i>
            <span style="color: #5a6772;">Objects has been successfully downloaded</span>
        </div>
        <div v-if="state.step2Loading" class="mt15 ">
            <div>{{ data.progressDownloadObjectsMessage }}: <b><span
                    style="color: #20a0ff">{{ data.progressDownloadObjectsCurrent }}</span> /
                {{ data.progressDownloadObjectsTotal }}</b></div>
            <el-progress
                    :percentage="Math.round(data.progressDownloadObjectsCurrent * 100
                     / data.progressDownloadObjectsTotal)"></el-progress>
        </div>

        <el-button type="warning" class="regular mt10" :plain="true"
                   @click="state.restartFrom=2;"
                   v-if="state.done2">
            <i class="zmdi zmdi-rotate-left mr5"></i> reselect
        </el-button>
    </div>


</sly-card>
