<sly-card title="Augmentations" class="mt15 mb15"

          subtitle="Choose one of the prepared templates or provide custom pipeline"


          :disabled="{disabled: state.disabled2, message: 'Download data at step 1 before configure augmentations'}"
          ref="step1" style="width: 100%"
>


    <div>

        <div class="fflex mt10 mb10">
            <el-switch v-model="state.useBaseAugs" on-text=""
                       off-text=""></el-switch>
            <h4 class="ml10 mb15 mt15">Base</h4>
            <p>&nbsp;(creates a set of base primitives)</p>
        </div>
        <el-tabs type="border-card" class="el-tabs-cards mt10" v-model="state.augsBaseType"
                 v-if="state.useBaseAugs">
            <el-tab-pane name="template">
                <el-radio slot="label" v-model="state.augsBaseType" label="template" :disabled="data.done2_1">
                    Default templates
                </el-radio>
                <sly-field title="Template">
                    <el-select v-model="state.augsBaseTemplateName" placeholder="Select template"
                    >
                        <el-option
                                v-for="item in data.augTemplates"
                                :key="item.name"
                                :label="item.name"
                                :value="item.name">
                        </el-option>
                    </el-select>
                </sly-field>
                <sly-field title="Preview python representation">
                    <sly-copy-to-clipboard :data="data.augPythonCode[state.augsBaseTemplateName]">
                        <sly-editor v-model="data.augPythonCode[state.augsBaseTemplateName]"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <el-button type="primary" class="regular" :plain="true" @click="command('preview_base_augs')">
                    <i class="zmdi zmdi-play mr5"></i>Preview on random background
                </el-button>
                <sly-grid-gallery
                        v-if="data.galleryBase1 && state.augsBaseType == 'template'"
                        class="mt10"
                        :content="data.galleryBase1.content"
                        :options="data.galleryBase1.options">
                    <template v-slot:card-footer="{ annotation }">
                        <div class="mt5" style="text-align: center">
                            <el-tag type="primary">{{ annotation.title }}</el-tag>
                        </div>
                    </template>
                </sly-grid-gallery>
            </el-tab-pane>
            <el-tab-pane name="custom">
                <el-radio slot="label" v-model="state.augsBaseType" label="custom">
                    Custom pipeline

                </el-radio>
                <sly-field title="Path to JSON configuration" description="Copy path in Team Files">
                    <div class="fflex">
                        <el-input v-model="state.customAugsPath"
                                  placeholder="Path to .json file in Team Files"
                        ></el-input>
                        <el-button
                                style="margin-left: 5px;"
                                type="primary" class="regular" size="small"
                                :disabled="state.customAugsPath.length === 0 "
                                @click="command('load_existing_pipeline')">
                            apply
                        </el-button>
                    </div>
                </sly-field>
                <sly-field title="Preview python representation" v-if="data.customAugsPy">
                    <sly-copy-to-clipboard :data="data.customAugsPy">
                        <sly-editor v-model="data.customAugsPy"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <div v-if="data.customAugsPy">
                    <el-button type="primary" class="regular" :plain="true"
                               @click="command('preview_augs')">
                        <i class="zmdi zmdi-play mr5"></i>Preview on random background
                    </el-button>
                    <sly-grid-gallery
                            v-if="data.galleryBase2 && state.augsBaseType == 'custom'"
                            class="mt10"
                            :content="data.galleryBase2.content"
                            :options="data.galleryBase2.options">
                        <template v-slot:card-footer="{ annotation }">
                            <div class="mt5" style="text-align: center">
                                <el-tag type="primary">{{ annotation.title }}</el-tag>
                            </div>
                        </template>
                    </sly-grid-gallery>
                </div>
            </el-tab-pane>
        </el-tabs>


    </div>


    <div>

        <div class="fflex mt10 mb10">
            <el-switch v-model="state.useMinorAugs" on-text=""
                       off-text=""></el-switch>
            <h4 class="ml10 mb15 mt15">Minor</h4>
            <p>&nbsp;(applied to base primitives on every frame)</p>
        </div>
        <el-tabs type="border-card" class="el-tabs-cards mt10" v-model="state.augsMinorType"
                 v-if="state.useMinorAugs">
            <el-tab-pane name="template">
                <el-radio slot="label" v-model="state.augsMinorType" label="template" :disabled="data.done2_1">
                    Default templates
                </el-radio>
                <sly-field title="Template">
                    <el-select v-model="state.augsMinorTemplateName" placeholder="Select template"
                    >
                        <el-option
                                v-for="item in data.augTemplates"
                                :key="item.name"
                                :label="item.name"
                                :value="item.name">
                        </el-option>
                    </el-select>
                </sly-field>
                <sly-field title="Preview python representation">
                    <sly-copy-to-clipboard :data="data.augPythonCode[state.augsMinorTemplateName]">
                        <sly-editor v-model="data.augPythonCode[state.augsMinorTemplateName]"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <el-button type="primary" class="regular" :plain="true" @click="command('preview_augs')">
                    <i class="zmdi zmdi-play mr5"></i>Preview on random background
                </el-button>
                <sly-grid-gallery
                        v-if="data.galleryMinor1 && state.augsMinorType == 'template'"
                        class="mt10"
                        :content="data.galleryMinor1.content"
                        :options="data.galleryMinor1.options">
                    <template v-slot:card-footer="{ annotation }">
                        <div class="mt5" style="text-align: center">
                            <el-tag type="primary">{{ annotation.title }}</el-tag>
                        </div>
                    </template>
                </sly-grid-gallery>
            </el-tab-pane>
            <el-tab-pane name="custom">
                <el-radio slot="label" v-model="state.augsMinorType" label="custom">
                    Custom pipeline

                </el-radio>
                <sly-field title="Path to JSON configuration" description="Copy path in Team Files">
                    <div class="fflex">
                        <el-input v-model="state.customAugsPath"
                                  placeholder="Path to .json file in Team Files"
                        ></el-input>
                        <el-button
                                style="margin-left: 5px;"
                                type="primary" class="regular" size="small"
                                :disabled="state.customAugsPath.length === 0 "
                                @click="command('load_existing_pipeline')">
                            apply
                        </el-button>
                    </div>
                </sly-field>
                <sly-field title="Preview python representation" v-if="data.customAugsPy">
                    <sly-copy-to-clipboard :data="data.customAugsPy">
                        <sly-editor v-model="data.customAugsPy"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <div v-if="data.customAugsPy">
                    <el-button type="primary" class="regular" :plain="true"
                               @click="command('preview_augs')">
                        <i class="zmdi zmdi-play mr5"></i>Preview on random background
                    </el-button>
                    <sly-grid-gallery
                            v-if="data.galleryMinor2 && state.augsMinorType == 'custom'"
                            class="mt10"
                            :content="data.galleryMinor2.content"
                            :options="data.galleryMinor2.options">
                        <template v-slot:card-footer="{ annotation }">
                            <div class="mt5" style="text-align: center">
                                <el-tag type="primary">{{ annotation.title }}</el-tag>
                            </div>
                        </template>
                    </sly-grid-gallery>
                </div>
            </el-tab-pane>
        </el-tabs>


    </div>


    <div>

        <div class="fflex mt10 mb10">
            <el-switch v-model="state.useFrameAugs" on-text=""
                       off-text=""></el-switch>
            <h4 class="ml10 mb15 mt15">Frame</h4>
            <p>&nbsp;(applied to whole frame)</p>
        </div>
        <el-tabs type="border-card" class="el-tabs-cards mt10" v-model="state.augsFrameType"
                 v-if="state.useFrameAugs">
            <el-tab-pane name="template">
                <el-radio slot="label" v-model="state.augsFrameType" label="template" :disabled="data.done2_1">
                    Default templates
                </el-radio>
                <sly-field title="Template">
                    <el-select v-model="state.augsFrameTemplateName" placeholder="Select template"
                    >
                        <el-option
                                v-for="item in data.augTemplates"
                                :key="item.name"
                                :label="item.name"
                                :value="item.name">
                        </el-option>
                    </el-select>
                </sly-field>
                <sly-field title="Preview python representation">
                    <sly-copy-to-clipboard :data="data.augPythonCode[state.augsFrameTemplateName]">
                        <sly-editor v-model="data.augPythonCode[state.augsFrameTemplateName]"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <el-button type="primary" class="regular" :plain="true" @click="command('preview_augs')">
                    <i class="zmdi zmdi-play mr5"></i>Preview on random background
                </el-button>
                <sly-grid-gallery
                        v-if="data.galleryFrame1 && state.augsFrameType == 'template'"
                        class="mt10"
                        :content="data.galleryFrame1.content"
                        :options="data.galleryFrame1.options">
                    <template v-slot:card-footer="{ annotation }">
                        <div class="mt5" style="text-align: center">
                            <el-tag type="primary">{{ annotation.title }}</el-tag>
                        </div>
                    </template>
                </sly-grid-gallery>
            </el-tab-pane>
            <el-tab-pane name="custom">
                <el-radio slot="label" v-model="state.augsFrameType" label="custom">
                    Custom pipeline

                </el-radio>
                <sly-field title="Path to JSON configuration" description="Copy path in Team Files">
                    <div class="fflex">
                        <el-input v-model="state.customAugsPath"
                                  placeholder="Path to .json file in Team Files"
                        ></el-input>
                        <el-button
                                style="margin-left: 5px;"
                                type="primary" class="regular" size="small"
                                :disabled="state.customAugsPath.length === 0 "
                                @click="command('load_existing_pipeline')">
                            apply
                        </el-button>
                    </div>
                </sly-field>
                <sly-field title="Preview python representation" v-if="data.customAugsPy">
                    <sly-copy-to-clipboard :data="data.customAugsPy">
                        <sly-editor v-model="data.customAugsPy"
                                    :options="data.pyViewOptions">
                        </sly-editor>
                    </sly-copy-to-clipboard>
                </sly-field>
                <div v-if="data.customAugsPy">
                    <el-button type="primary" class="regular" :plain="true"
                               @click="command('preview_augs')">
                        <i class="zmdi zmdi-play mr5"></i>Preview on random background
                    </el-button>
                    <sly-grid-gallery
                            v-if="data.galleryFrame2 && state.augsFrameType == 'custom'"
                            class="mt10"
                            :content="data.galleryFrame2.content"
                            :options="data.galleryFrame2.options">
                        <template v-slot:card-footer="{ annotation }">
                            <div class="mt5" style="text-align: center">
                                <el-tag type="primary">{{ annotation.title }}</el-tag>
                            </div>
                        </template>
                    </sly-grid-gallery>
                </div>
            </el-tab-pane>
        </el-tabs>
    </div>

</sly-card>


<div class="fflex m15 mb15" style="width: 100%;">
        <sly-card style="width: 100%;">
            <div>
                <div class="fflex mt10" v-if="!data.done2">
                    <el-button type="primary" class="regular" @click="command('apply_augs')">Apply augmentations
                    </el-button>
                </div>
                <div v-if="data.done2">
                    <i class="zmdi zmdi-check-circle mr5 mt10" style="color: #13ce66"></i>
                    <span style="color: #5a6772;">Augmentations has been successfully defined</span>
                </div>
                <el-button type="warning" class="regular mt10" :plain="true"
                           @click="state.restartFrom = 2;"
                           v-if="data.done2">
                    <i class="zmdi zmdi-rotate-left mr5"></i> Select other augmentations
                </el-button>
            </div>
        </sly-card>
    </div>
