<div id="v-synth">
    <sly-style>
        #svs .el-tabs.el-tabs-cards .el-radio {
        display: flex;
        align-items: start;
        /*margin-bottom: 10px;*/
        margin-left: 0;
        white-space: normal;
        }

        #svs .el-tabs.el-tabs-cards .el-radio__label div {
        color: #7f858e;
        font-size: 13px;
        }

        #svs .el-tabs.el-tabs-cards .el-radio__label {
        line-height: 17px;
        }

        .beautiful-table { border-collapse: collapse; }
        .beautiful-table tr:nth-child(2n) { background-color: #f6f8fa; }
        .beautiful-table td, .beautiful-table th {
        border: 1px solid #dfe2e5;
        padding: 6px 13px;
        text-align: center;
        line-height: 20px;
        }
        .beautiful-table.al td, .beautiful-table.al th {
        text-align: left;
        }

        #svs .el-tabs.el-tabs-cards { border-radius: 4px; box-shadow: none; }
        #svs .el-tabs.el-tabs-cards .el-tabs__header { background-color: #f6fafd; }
        #svs .el-tabs.el-tabs-cards .el-tabs__nav { float: none; display: flex; justify-content:
        space-between; }
        #svs .el-tabs.el-tabs-cards .el-tabs__item { flex: 1; margin-bottom: -3px; padding: 9px 16px
        13px;
        height: auto; line-height: normal; border-radius: 4px; }

    </sly-style>


    <sly-stepper :active="state.activeStep">
        <sly-stepper-item>
            {% include 'src/ui/input_project.html' %}
        </sly-stepper-item>
        <sly-stepper-item>
            {% include 'src/ui/augs.html' %}
        </sly-stepper-item>
    </sly-stepper>


    <div class="fflex mt15" style="align-items: stretch">
        <sly-card class="mr15"
                  title="Settings"
                  subtitle="Synth params"
                  style="min-width: 310px; max-width: 310px;">


            <div class="mt10 mb10">
                <div><b>Objects possible speed by X</b></div>
                <div class="block">
                    <el-slider
                            v-model="state.speedInterval"
                            range
                            show-stops
                            :min="1"
                            :max="32">
                    </el-slider>
                </div>
            </div>
            <div class="mt10 mb10">
                <div><b>Objects possible overlay</b></div>

                <div class="block">
                    <el-slider
                            v-model="state.objectOverlayInterval"
                            range
                            show-stops
                            :min="0"
                            :max="1"
                            :step="0.1">

                    </el-slider>
                </div>
            </div>


            <sly-field style="margin-top: 15px;" title="MovementLaw" description="Select movement law(-s)">

                <div class="fflex align-start">
                    <el-checkbox v-model="state.linearLaw" class="mt10 mr10"/>
                    <sly-field class="mt20" title="Linear"
                               description="Move objects by line">
                    </sly-field>
                </div>

                <div class="fflex align-start">
                    <el-checkbox v-model="state.randomLaw" class="mt10 mr10"/>
                    <sly-field class="mt20" title="Random Y"
                               description="Move objects randomly">
                    </sly-field>
                </div>

            </sly-field>

            <div class="mt15 mb15">
                <div><b>Video FPS</b></div>
                <el-input-number class="mt5" v-model="state.fps" :min="10" :max="60"></el-input-number>
            </div>

            <div class="mt15 mb15">
                <div><b>Video duration (in seconds)</b></div>
                <el-input-number class="mt5" v-model="state.durationVideo" :min="1" :max="999"
                                 :step="10"></el-input-number>
            </div>


        </sly-card>
        <sly-card title="Preview"
                  subtitle="Preview vSynth result"
                  style="width: 100%">
            <div slot="header" class="mb10">
                <div><b style="font-size: 13px">Preview duration</b></div>
                <el-input-number class="mt5 mr15" v-model="state.durationPreview" :min="1" :max="10"
                                 size="small"></el-input-number>
                <el-button
                        type="primary"
                        @click="state.previewLoading = true; command('preview')"
                        :loading="state.previewLoading"
                        :disabled="data.resProjectId || data.started || !state.bgProjectId"
                >
                    <i class="zmdi zmdi-slideshow" style="margin-right: 5px"></i> Preview
                </el-button>
            </div>
            <video v-if="data.videoUrl" controls style="max-height: 650px; max-width: 100%;">

                <!--                <source src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">-->
                <source :src="data.videoUrl" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div v-if="!data.videoUrl && state.previewLoading === false">Press preview to watch demo video</div>
            <div v-if=""></div>

            <div class="fflex mt10" v-if="state.previewLoading === true" style="align-items: baseline;">
                <div class="mr10" style="width: 120px;">{{ data.progressPreviewMessage }}:</div>
                <el-progress :percentage="data.progressPreview" style="flex: 1"></el-progress>
                <div class="ml10" style="flex: none;">[{{ data.progressPreviewCurrent }}
                    / {{ data.progressPreviewTotal }}]
                </div>
            </div>
        </sly-card>
    </div>

    <sly-card class="mt15"
              title="Output Project"
              subtitle="Define result project name, press Run and monitor progress">
        <sly-field title="Result project name">
            <el-input v-model="state.resProjectName"></el-input>
            <el-button class="mt10" type="primary" :loading="data.started"
                       :disabled="data.resProjectId || !state.bgProjectId"
                       @click="data.started = true; command('synthesize')">
                Synthesize
            </el-button>
        </sly-field>

        <div style="margin-top: 30px;">
            <sly-field class="mt15"
                       v-if="data.resProjectId && !data.started"
                       title="New project has been created"
                       description="Synthesize configuration is saved in project info (metadata) as json">
                <sly-field title="" description="Project">
                    <a slot="title" target="_blank"
                       :href="`/projects/${data.resProjectId}/datasets`">{{ data.resProjectName }}</a>
                    <sly-icon slot="icon" :options="{ imageUrl: `${data.resProjectPreviewUrl}` }"/>
                </sly-field>
            </sly-field>
        </div>
        <div class="fflex mt10" v-if="data.started === true">
            <div class="mr10" style="width: 120px;">{{ data.progressSynthMessage }}:</div>
            <el-progress class="mt10" v-if="data.started === true" :percentage="data.progressSynth"
                         style="flex: 1"></el-progress>
            <div class="ml10" style="flex: none;">[{{ data.progressSynthCurrent }} / {{ data.progressSynthTotal }}]
            </div>
        </div>
    </sly-card>
</div>